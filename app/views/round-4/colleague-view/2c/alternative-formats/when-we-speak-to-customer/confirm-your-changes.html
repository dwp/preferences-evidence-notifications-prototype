{% extends "layouts/main.html" %}

{% block pageTitle %}
  Personal details
{% endblock %}

{% block header %}
  {% include "round-3/components/key-details.html" %}
{% endblock %}


{% block beforeContent %}


{% include "round-4/breadcrumbs/colleague-view/2c/when-we-speak-to-customer.html" %}

{% endblock %}

{% block content %}


<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds-from-desktop">


    <h1 class="govuk-heading-l">
      Confirm your changes
    </h1>

    <dl class="govuk-summary-list">

      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          When we speak to you now
        </dt>
        <dd class="govuk-summary-list__value" id="updatedValue">
        </dd>
        <dd class="govuk-summary-list__actions">
          <a class="govuk-link" href="how-should-we-contact-customer-if-we-need-to-speak-to-customer">
            Change
          </a>
        </dd>
      </div>
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          How we spoke to you
        </dt>
        <dd class="govuk-summary-list__value">
          <p>You could contact me by phone</p>
        </dd>
        <dd class="govuk-summary-list__actions">
          <a class="govuk-link" href="how-should-we-contact-customer-if-we-need-to-speak-to-customer">
            Change
          </a>
        </dd>
      </div>
    </dl>

    <div class="govuk-warning-text">
      <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
      <strong class="govuk-warning-text__text">
        <span class="govuk-visually-hidden">Warning</span>
        This change isn't always guarenteed, sometimes legally we need to make a phone call.
      </strong>
    </div>

    {% from "govuk/components/button/macro.njk" import govukButton %}

    <div class="govuk-button-group">
      {{ govukButton({
      text: "Confirm",
      href: "/round-4/colleague-view/2c/alternative-formats/when-we-speak-to-customer/updated-spoken.html",
      preventDoubleClick: true
      }) }}

      {{ govukButton({
      text: "Cancel",
      classes: "govuk-button--warning",
      href: "/round-4/colleague-view/2c/alternative-formats/when-we-speak-to-customer/abandon-journey.html"
      }) }}

      <!-- <a class="govuk-link" href="/round-4/colleague-view/2c/address-we-send-letters-to/abandon-journey.html">Cancel</a> -->
    </div>

  </div>
  <script>
    var divSection = document.getElementById('updatedValue');
    var howWeConnect = sessionStorage.getItem('howWeConnect');
    var howWeConnectArrary;
    if (howWeConnect) {
      howWeConnectArrary = howWeConnect.split("<br>");
    }

    if (divSection) {
      if (howWeConnect && howWeConnectArrary.length > 0) {
        var list = "";

        if (howWeConnectArrary.length > 1) {
          list += "<ul class='govuk-list govuk-list--bullet'>";
          for (let i = 1; i < howWeConnectArrary.length; i++) {
            list += `<li>${howWeConnectArrary[i]}</li>`
          }
          list += "</ul>"
        }

        divSection.innerHTML = `<p class='govuk-body'>${howWeConnectArrary[0]}</p>${list}`;
      } else {
        divSection.innerHTML = "";
      }
    }

  </script>

</div>
</div>
{% endblock %}